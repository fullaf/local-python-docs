
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>23. gdb Support &mdash; Python Developer&#39;s Guide </title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Python Developer&#39;s Guide " href="index.html" />
    <link rel="next" title="24. Changing CPython’s Grammar" href="grammar.html" />
    <link rel="prev" title="22. Emacs support" href="emacs.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="grammar.html" title="24. Changing CPython’s Grammar"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="emacs.html" title="22. Emacs support"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Python Developer&#39;s Guide </a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="gdb-support">
<span id="gdb"></span><h1>23. gdb Support<a class="headerlink" href="#gdb-support" title="Permalink to this headline">¶</a></h1>
<p>If you experience low-level problems such as crashes or deadlocks
(e.g. when tinkering with parts of CPython which are written in C),
it can be convenient to use a low-level debugger such as gdb in
order to diagnose and fix the issue.  By default, however, gdb (or any
of its front-ends) doesn&#8217;t know about high-level information specific to the
CPython interpreter, such as which Python function is currently executing,
or what type or value has a given Python object represented by a standard
<tt class="docutils literal"><span class="pre">PyObject</span> <span class="pre">*</span></tt> pointer.  We hereafter present two ways to overcome this
limitation.</p>
<div class="section" id="gdb-7-and-later">
<h2>23.1. gdb 7 and later<a class="headerlink" href="#gdb-7-and-later" title="Permalink to this headline">¶</a></h2>
<p>In gdb 7, support for <a class="reference external" href="http://sourceware.org/gdb/current/onlinedocs/gdb/Python.html#Python">extending gdb with Python</a> was
added. When CPython is built you will notice a <tt class="docutils literal"><span class="pre">python-gdb.py</span></tt> file in the
root directory of your checkout. Read the module docstring for details on how
to use the file to enhance gdb for easier debugging of a CPython process.</p>
<p>This is what a backtrace looks like (truncated) when this extension is
enabled:</p>
<div class="highlight-python"><pre>#0  0x000000000041a6b1 in PyObject_Malloc (nbytes=Cannot access memory at address 0x7fffff7fefe8
) at Objects/obmalloc.c:748
#1  0x000000000041b7c0 in _PyObject_DebugMallocApi (id=111 'o', nbytes=24) at Objects/obmalloc.c:1445
#2  0x000000000041b717 in _PyObject_DebugMalloc (nbytes=24) at Objects/obmalloc.c:1412
#3  0x000000000044060a in _PyUnicode_New (length=11) at Objects/unicodeobject.c:346
#4  0x00000000004466aa in PyUnicodeUCS2_DecodeUTF8Stateful (s=0x5c2b8d "__lltrace__", size=11, errors=0x0, consumed=
    0x0) at Objects/unicodeobject.c:2531
#5  0x0000000000446647 in PyUnicodeUCS2_DecodeUTF8 (s=0x5c2b8d "__lltrace__", size=11, errors=0x0)
    at Objects/unicodeobject.c:2495
#6  0x0000000000440d1b in PyUnicodeUCS2_FromStringAndSize (u=0x5c2b8d "__lltrace__", size=11)
    at Objects/unicodeobject.c:551
#7  0x0000000000440d94 in PyUnicodeUCS2_FromString (u=0x5c2b8d "__lltrace__") at Objects/unicodeobject.c:569
#8  0x0000000000584abd in PyDict_GetItemString (v=
    {'Yuck': &lt;type at remote 0xad4730&gt;, '__builtins__': &lt;module at remote 0x7ffff7fd5ee8&gt;, '__file__': 'Lib/test/crashers/nasty_eq_vs_dict.py', '__package__': None, 'y': &lt;Yuck(i=0) at remote 0xaacd80&gt;, 'dict': {0: 0, 1: 1, 2: 2, 3: 3}, '__cached__': None, '__name__': '__main__', 'z': &lt;Yuck(i=0) at remote 0xaace60&gt;, '__doc__': None}, key=
    0x5c2b8d "__lltrace__") at Objects/dictobject.c:2171</pre>
</div>
<p>(notice how the dictionary argument to <tt class="docutils literal"><span class="pre">PyDict_GetItemString</span></tt> is displayed
as its <tt class="docutils literal"><span class="pre">repr()</span></tt>, rather than an opaque <tt class="docutils literal"><span class="pre">PyObject</span> <span class="pre">*</span></tt> pointer)</p>
<p>The extension works by supplying a custom printing routine for values of type
<tt class="docutils literal"><span class="pre">PyObject</span> <span class="pre">*</span></tt>.  If you need to access lower-level details of an object, then
cast the value to a pointer of the appropriate type.  For example:</p>
<div class="highlight-python"><pre>(gdb) p globals
$1 = {'__builtins__': &lt;module at remote 0x7ffff7fb1868&gt;, '__name__':
'__main__', 'ctypes': &lt;module at remote 0x7ffff7f14360&gt;, '__doc__': None,
'__package__': None}

(gdb) p *(PyDictObject*)globals
$2 = {ob_refcnt = 3, ob_type = 0x3dbdf85820, ma_fill = 5, ma_used = 5,
ma_mask = 7, ma_table = 0x63d0f8, ma_lookup = 0x3dbdc7ea70
&lt;lookdict_string&gt;, ma_smalltable = {{me_hash = 7065186196740147912,
me_key = '__builtins__', me_value = &lt;module at remote 0x7ffff7fb1868&gt;},
{me_hash = -368181376027291943, me_key = '__name__',
me_value ='__main__'}, {me_hash = 0, me_key = 0x0, me_value = 0x0},
{me_hash = 0, me_key = 0x0, me_value = 0x0},
{me_hash = -9177857982131165996, me_key = 'ctypes',
me_value = &lt;module at remote 0x7ffff7f14360&gt;},
{me_hash = -8518757509529533123, me_key = '__doc__', me_value = None},
{me_hash = 0, me_key = 0x0, me_value = 0x0}, {
  me_hash = 6614918939584953775, me_key = '__package__', me_value = None}}}</pre>
</div>
<p>The pretty-printers try to closely match the <tt class="docutils literal"><span class="pre">repr()</span></tt> implementation of the
underlying implementation of Python, and thus vary somewhat between Python 2
and Python 3.</p>
<p>An area that can be confusing is that the custom printer for some types look a
lot like gdb&#8217;s built-in printer for standard types.  For example, the
pretty-printer for a Python 3 <tt class="docutils literal"><span class="pre">int</span></tt> gives a <tt class="docutils literal"><span class="pre">repr()</span></tt> that is not
distinguishable from a printing of a regular machine-level integer:</p>
<div class="highlight-python"><pre>(gdb) p some_machine_integer
$3 = 42

(gdb) p some_python_integer
$4 = 42

(gdb) p *(PyLongObject*)some_python_integer
$5 = {ob_base = {ob_base = {ob_refcnt = 8, ob_type = 0x3dad39f5e0}, ob_size = 1},
ob_digit = {42}}</pre>
</div>
<p>A similar confusion can arise with the <tt class="docutils literal"><span class="pre">str</span></tt> type, where the output looks a
lot like gdb&#8217;s built-in printer for <tt class="docutils literal"><span class="pre">char</span> <span class="pre">*</span></tt>:</p>
<div class="highlight-python"><pre>(gdb) p ptr_to_python_str
$6 = '__builtins__'</pre>
</div>
<p>The pretty-printer for <tt class="docutils literal"><span class="pre">str</span></tt> instances defaults to using single-quotes (as
does Python&#8217;s <tt class="docutils literal"><span class="pre">repr</span></tt> for strings) whereas the standard printer for <tt class="docutils literal"><span class="pre">char</span> <span class="pre">*</span></tt>
values uses double-quotes and contains a hexadecimal address:</p>
<div class="highlight-python"><pre>(gdb) p ptr_to_char_star
$7 = 0x6d72c0 "hello world"</pre>
</div>
<p>Here&#8217;s how to see the implementation details of a <tt class="docutils literal"><span class="pre">str</span></tt> instance (for Python
3, where a <tt class="docutils literal"><span class="pre">str</span></tt> is a <tt class="docutils literal"><span class="pre">PyUnicodeObject</span> <span class="pre">*</span></tt>):</p>
<div class="highlight-python"><pre>(gdb) p *(PyUnicodeObject*)$6
$8 = {ob_base = {ob_refcnt = 33, ob_type = 0x3dad3a95a0}, length = 12,
str = 0x7ffff2128500, hash = 7065186196740147912, state = 1, defenc = 0x0}</pre>
</div>
<p>As well as adding pretty-printing support for <tt class="docutils literal"><span class="pre">PyObject</span> <span class="pre">*</span></tt>, the extension adds a number of commands to gdb</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">py-list</span></tt></dt>
<dd><p class="first">List the Python source code (if any) for the current frame in the selected
thread.  The current line is marked with a &#8220;&gt;&#8221;:</p>
<div class="highlight-python"><pre>(gdb) py-list
 901        if options.profile:
 902            options.profile = False
 903            profile_me()
 904            return
 905
&gt;906        u = UI()
 907        if not u.quit:
 908            try:
 909                gtk.main()
 910            except KeyboardInterrupt:
 911                # properly quit on a keyboard interrupt...</pre>
</div>
<p class="last">Use <tt class="docutils literal"><span class="pre">py-list</span> <span class="pre">START</span></tt> to list at a different line number within the python
source, and <tt class="docutils literal"><span class="pre">py-list</span> <span class="pre">START,END</span></tt> to list a specific range of lines within
the python source.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">py-up</span></tt> and <tt class="docutils literal"><span class="pre">py-down</span></tt></dt>
<dd><p class="first">The <tt class="docutils literal"><span class="pre">py-up</span></tt> and <tt class="docutils literal"><span class="pre">py-down</span></tt> commands are analogous to gdb&#8217;s regular <tt class="docutils literal"><span class="pre">up</span></tt>
and <tt class="docutils literal"><span class="pre">down</span></tt> commands, but try to move at the level of CPython frames, rather
than C frames.</p>
<p>gdb is not always able to read the relevant frame information, depending on
the optimization level with which CPython was compiled. Internally, the
commands look for C frames that are executing <tt class="docutils literal"><span class="pre">PyEval_EvalFrameEx</span></tt> (which
implements the core bytecode interpreter loop within CPython) and look up
the value of the related <tt class="docutils literal"><span class="pre">PyFrameObject</span> <span class="pre">*</span></tt>.</p>
<p>They emit the frame number (at the C level) within the thread.</p>
<p>For example:</p>
<div class="highlight-python"><pre>(gdb) py-up
#37 Frame 0x9420b04, for file /usr/lib/python2.6/site-packages/
gnome_sudoku/main.py, line 906, in start_game ()
    u = UI()
(gdb) py-up
#40 Frame 0x948e82c, for file /usr/lib/python2.6/site-packages/
gnome_sudoku/gnome_sudoku.py, line 22, in start_game(main=&lt;module at remote 0xb771b7f4&gt;)
    main.start_game()
(gdb) py-up
Unable to find an older python frame</pre>
</div>
<p>so we&#8217;re at the top of the python stack.  Going back down:</p>
<div class="highlight-python"><pre>(gdb) py-down
#37 Frame 0x9420b04, for file /usr/lib/python2.6/site-packages/gnome_sudoku/main.py, line 906, in start_game ()
    u = UI()
(gdb) py-down
#34 (unable to read python frame information)
(gdb) py-down
#23 (unable to read python frame information)
(gdb) py-down
#19 (unable to read python frame information)
(gdb) py-down
#14 Frame 0x99262ac, for file /usr/lib/python2.6/site-packages/gnome_sudoku/game_selector.py, line 201, in run_swallowed_dialog (self=&lt;NewOrSavedGameSelector(new_game_model=&lt;gtk.ListStore at remote 0x98fab44&gt;, puzzle=None, saved_games=[{'gsd.auto_fills': 0, 'tracking': {}, 'trackers': {}, 'notes': [], 'saved_at': 1270084485, 'game': '7 8 0 0 0 0 0 5 6 0 0 9 0 8 0 1 0 0 0 4 6 0 0 0 0 7 0 6 5 0 0 0 4 7 9 2 0 0 0 9 0 1 0 0 0 3 9 7 6 0 0 0 1 8 0 6 0 0 0 0 2 8 0 0 0 5 0 4 0 6 0 0 2 1 0 0 0 0 0 4 5\n7 8 0 0 0 0 0 5 6 0 0 9 0 8 0 1 0 0 0 4 6 0 0 0 0 7 0 6 5 1 8 3 4 7 9 2 0 0 0 9 0 1 0 0 0 3 9 7 6 0 0 0 1 8 0 6 0 0 0 0 2 8 0 0 0 5 0 4 0 6 0 0 2 1 0 0 0 0 0 4 5', 'gsd.impossible_hints': 0, 'timer.__absolute_start_time__': &lt;float at remote 0x984b474&gt;, 'gsd.hints': 0, 'timer.active_time': &lt;float at remote 0x984b494&gt;, 'timer.total_time': &lt;float at remote 0x984b464&gt;}], dialog=&lt;gtk.Dialog at remote 0x98faaa4&gt;, saved_game_model=&lt;gtk.ListStore at remote 0x98fad24&gt;, sudoku_maker=&lt;SudokuMaker(terminated=False, played=[], batch_siz...(truncated)
            swallower.run_dialog(self.dialog)
(gdb) py-down
#11 Frame 0x9aead74, for file /usr/lib/python2.6/site-packages/gnome_sudoku/dialog_swallower.py, line 48, in run_dialog (self=&lt;SwappableArea(running=&lt;gtk.Dialog at remote 0x98faaa4&gt;, main_page=0) at remote 0x98fa6e4&gt;, d=&lt;gtk.Dialog at remote 0x98faaa4&gt;)
            gtk.main()
(gdb) py-down
#8 (unable to read python frame information)
(gdb) py-down
Unable to find a newer python frame</pre>
</div>
<p class="last">and we&#8217;re at the bottom of the python stack.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">py-bt</span></tt></dt>
<dd><p class="first">The <tt class="docutils literal"><span class="pre">py-bt</span></tt> command attempts to display a Python-level backtrace of the
current thread.</p>
<p>For example:</p>
<div class="highlight-python"><pre>(gdb) py-bt
#8 (unable to read python frame information)
#11 Frame 0x9aead74, for file /usr/lib/python2.6/site-packages/gnome_sudoku/dialog_swallower.py, line 48, in run_dialog (self=&lt;SwappableArea(running=&lt;gtk.Dialog at remote 0x98faaa4&gt;, main_page=0) at remote 0x98fa6e4&gt;, d=&lt;gtk.Dialog at remote 0x98faaa4&gt;)
            gtk.main()
#14 Frame 0x99262ac, for file /usr/lib/python2.6/site-packages/gnome_sudoku/game_selector.py, line 201, in run_swallowed_dialog (self=&lt;NewOrSavedGameSelector(new_game_model=&lt;gtk.ListStore at remote 0x98fab44&gt;, puzzle=None, saved_games=[{'gsd.auto_fills': 0, 'tracking': {}, 'trackers': {}, 'notes': [], 'saved_at': 1270084485, 'game': '7 8 0 0 0 0 0 5 6 0 0 9 0 8 0 1 0 0 0 4 6 0 0 0 0 7 0 6 5 0 0 0 4 7 9 2 0 0 0 9 0 1 0 0 0 3 9 7 6 0 0 0 1 8 0 6 0 0 0 0 2 8 0 0 0 5 0 4 0 6 0 0 2 1 0 0 0 0 0 4 5\n7 8 0 0 0 0 0 5 6 0 0 9 0 8 0 1 0 0 0 4 6 0 0 0 0 7 0 6 5 1 8 3 4 7 9 2 0 0 0 9 0 1 0 0 0 3 9 7 6 0 0 0 1 8 0 6 0 0 0 0 2 8 0 0 0 5 0 4 0 6 0 0 2 1 0 0 0 0 0 4 5', 'gsd.impossible_hints': 0, 'timer.__absolute_start_time__': &lt;float at remote 0x984b474&gt;, 'gsd.hints': 0, 'timer.active_time': &lt;float at remote 0x984b494&gt;, 'timer.total_time': &lt;float at remote 0x984b464&gt;}], dialog=&lt;gtk.Dialog at remote 0x98faaa4&gt;, saved_game_model=&lt;gtk.ListStore at remote 0x98fad24&gt;, sudoku_maker=&lt;SudokuMaker(terminated=False, played=[], batch_siz...(truncated)
            swallower.run_dialog(self.dialog)
#19 (unable to read python frame information)
#23 (unable to read python frame information)
#34 (unable to read python frame information)
#37 Frame 0x9420b04, for file /usr/lib/python2.6/site-packages/gnome_sudoku/main.py, line 906, in start_game ()
    u = UI()
#40 Frame 0x948e82c, for file /usr/lib/python2.6/site-packages/gnome_sudoku/gnome_sudoku.py, line 22, in start_game (main=&lt;module at remote 0xb771b7f4&gt;)
    main.start_game()</pre>
</div>
<p class="last">The frame numbers correspond to those displayed by gdb&#8217;s standard <tt class="docutils literal"><span class="pre">backtrace</span></tt> command.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">py-print</span></tt></dt>
<dd><p class="first">The <tt class="docutils literal"><span class="pre">py-print</span></tt> command looks up a Python name and tries to print it.  It looks in locals within the current thread, then globals, then finally builtins:</p>
<div class="last highlight-python"><pre>(gdb) py-print self
local 'self' = &lt;SwappableArea(running=&lt;gtk.Dialog at remote 0x98faaa4&gt;,
main_page=0) at remote 0x98fa6e4&gt;
(gdb) py-print __name__
global '__name__' = 'gnome_sudoku.dialog_swallower'
(gdb) py-print len
builtin 'len' = &lt;built-in function len&gt;
(gdb) py-print scarlet_pimpernel
'scarlet_pimpernel' not found</pre>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">py-locals</span></tt></dt>
<dd><p class="first">The <tt class="docutils literal"><span class="pre">py-locals</span></tt> command looks up all Python locals within the current Python frame in the selected thread, and prints their representations:</p>
<div class="last highlight-python"><pre>(gdb) py-locals
self = &lt;SwappableArea(running=&lt;gtk.Dialog at remote 0x98faaa4&gt;,
main_page=0) at remote 0x98fa6e4&gt;
d = &lt;gtk.Dialog at remote 0x98faaa4&gt;</pre>
</div>
</dd>
</dl>
<p>You can of course use other gdb commands.  For example, the <tt class="docutils literal"><span class="pre">frame</span></tt> command takes you directly to a particular frame within the selected thread.  We can use it to go a specific frame shown by <tt class="docutils literal"><span class="pre">py-bt</span></tt> like this:</p>
<div class="highlight-python"><pre>(gdb) py-bt
(output snipped)
#68 Frame 0xaa4560, for file Lib/test/regrtest.py, line 1548, in &lt;module&gt; ()
        main()
(gdb) frame 68
#68 0x00000000004cd1e6 in PyEval_EvalFrameEx (f=Frame 0xaa4560, for file Lib/test/regrtest.py, line 1548, in &lt;module&gt; (), throwflag=0) at Python/ceval.c:2665
2665                            x = call_function(&amp;sp, oparg);
(gdb) py-list
1543        # Run the tests in a context manager that temporary changes the CWD to a
1544        # temporary and writable directory. If it's not possible to create or
1545        # change the CWD, the original CWD will be used. The original CWD is
1546        # available from test_support.SAVEDCWD.
1547        with test_support.temp_cwd(TESTCWD, quiet=True):
&gt;1548            main()</pre>
</div>
<p>The <tt class="docutils literal"><span class="pre">info</span> <span class="pre">threads</span></tt> command will give you a list of the threads within the process, and you can use the <tt class="docutils literal"><span class="pre">thread</span></tt> command to select a different one:</p>
<div class="highlight-python"><pre>(gdb) info threads
  105 Thread 0x7fffefa18710 (LWP 10260)  sem_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/sem_wait.S:86
  104 Thread 0x7fffdf5fe710 (LWP 10259)  sem_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/sem_wait.S:86
* 1 Thread 0x7ffff7fe2700 (LWP 10145)  0x00000038e46d73e3 in select () at ../sysdeps/unix/syscall-template.S:82</pre>
</div>
<p>You can use <tt class="docutils literal"><span class="pre">thread</span> <span class="pre">apply</span> <span class="pre">all</span> <span class="pre">COMMAND</span></tt> or (<tt class="docutils literal"><span class="pre">t</span> <span class="pre">a</span> <span class="pre">a</span> <span class="pre">COMMAND</span></tt> for short) to run a command on all threads.  You can use this with <tt class="docutils literal"><span class="pre">py-bt</span></tt> to see what every thread is doing at the Python level:</p>
<div class="highlight-python"><pre>(gdb) t a a py-bt

Thread 105 (Thread 0x7fffefa18710 (LWP 10260)):
#5 Frame 0x7fffd00019d0, for file /home/david/coding/python-svn/Lib/threading.py, line 155, in _acquire_restore (self=&lt;_RLock(_Verbose__verbose=False, _RLock__owner=140737354016512, _RLock__block=&lt;thread.lock at remote 0x858770&gt;, _RLock__count=1) at remote 0xd7ff40&gt;, count_owner=(1, 140737213728528), count=1, owner=140737213728528)
        self.__block.acquire()
#8 Frame 0x7fffac001640, for file /home/david/coding/python-svn/Lib/threading.py, line 269, in wait (self=&lt;_Condition(_Condition__lock=&lt;_RLock(_Verbose__verbose=False, _RLock__owner=140737354016512, _RLock__block=&lt;thread.lock at remote 0x858770&gt;, _RLock__count=1) at remote 0xd7ff40&gt;, acquire=&lt;instancemethod at remote 0xd80260&gt;, _is_owned=&lt;instancemethod at remote 0xd80160&gt;, _release_save=&lt;instancemethod at remote 0xd803e0&gt;, release=&lt;instancemethod at remote 0xd802e0&gt;, _acquire_restore=&lt;instancemethod at remote 0xd7ee60&gt;, _Verbose__verbose=False, _Condition__waiters=[]) at remote 0xd7fd10&gt;, timeout=None, waiter=&lt;thread.lock at remote 0x858a90&gt;, saved_state=(1, 140737213728528))
            self._acquire_restore(saved_state)
#12 Frame 0x7fffb8001a10, for file /home/david/coding/python-svn/Lib/test/lock_tests.py, line 348, in f ()
            cond.wait()
#16 Frame 0x7fffb8001c40, for file /home/david/coding/python-svn/Lib/test/lock_tests.py, line 37, in task (tid=140737213728528)
                f()

Thread 104 (Thread 0x7fffdf5fe710 (LWP 10259)):
#5 Frame 0x7fffe4001580, for file /home/david/coding/python-svn/Lib/threading.py, line 155, in _acquire_restore (self=&lt;_RLock(_Verbose__verbose=False, _RLock__owner=140737354016512, _RLock__block=&lt;thread.lock at remote 0x858770&gt;, _RLock__count=1) at remote 0xd7ff40&gt;, count_owner=(1, 140736940992272), count=1, owner=140736940992272)
        self.__block.acquire()
#8 Frame 0x7fffc8002090, for file /home/david/coding/python-svn/Lib/threading.py, line 269, in wait (self=&lt;_Condition(_Condition__lock=&lt;_RLock(_Verbose__verbose=False, _RLock__owner=140737354016512, _RLock__block=&lt;thread.lock at remote 0x858770&gt;, _RLock__count=1) at remote 0xd7ff40&gt;, acquire=&lt;instancemethod at remote 0xd80260&gt;, _is_owned=&lt;instancemethod at remote 0xd80160&gt;, _release_save=&lt;instancemethod at remote 0xd803e0&gt;, release=&lt;instancemethod at remote 0xd802e0&gt;, _acquire_restore=&lt;instancemethod at remote 0xd7ee60&gt;, _Verbose__verbose=False, _Condition__waiters=[]) at remote 0xd7fd10&gt;, timeout=None, waiter=&lt;thread.lock at remote 0x858860&gt;, saved_state=(1, 140736940992272))
            self._acquire_restore(saved_state)
#12 Frame 0x7fffac001c90, for file /home/david/coding/python-svn/Lib/test/lock_tests.py, line 348, in f ()
            cond.wait()
#16 Frame 0x7fffac0011c0, for file /home/david/coding/python-svn/Lib/test/lock_tests.py, line 37, in task (tid=140736940992272)
                f()

Thread 1 (Thread 0x7ffff7fe2700 (LWP 10145)):
#5 Frame 0xcb5380, for file /home/david/coding/python-svn/Lib/test/lock_tests.py, line 16, in _wait ()
    time.sleep(0.01)
#8 Frame 0x7fffd00024a0, for file /home/david/coding/python-svn/Lib/test/lock_tests.py, line 378, in _check_notify (self=&lt;ConditionTests(_testMethodName='test_notify', _resultForDoCleanups=&lt;TestResult(_original_stdout=&lt;cStringIO.StringO at remote 0xc191e0&gt;, skipped=[], _mirrorOutput=False, testsRun=39, buffer=False, _original_stderr=&lt;file at remote 0x7ffff7fc6340&gt;, _stdout_buffer=&lt;cStringIO.StringO at remote 0xc9c7f8&gt;, _stderr_buffer=&lt;cStringIO.StringO at remote 0xc9c790&gt;, _moduleSetUpFailed=False, expectedFailures=[], errors=[], _previousTestClass=&lt;type at remote 0x928310&gt;, unexpectedSuccesses=[], failures=[], shouldStop=False, failfast=False) at remote 0xc185a0&gt;, _threads=(0,), _cleanups=[], _type_equality_funcs={&lt;type at remote 0x7eba00&gt;: &lt;instancemethod at remote 0xd750e0&gt;, &lt;type at remote 0x7e7820&gt;: &lt;instancemethod at remote 0xd75160&gt;, &lt;type at remote 0x7e30e0&gt;: &lt;instancemethod at remote 0xd75060&gt;, &lt;type at remote 0x7e7d20&gt;: &lt;instancemethod at remote 0xd751e0&gt;, &lt;type at remote 0x7f19e0...(truncated)
        _wait()</pre>
</div>
</div>
<div class="section" id="gdb-6-and-earlier">
<h2>23.2. gdb 6 and earlier<a class="headerlink" href="#gdb-6-and-earlier" title="Permalink to this headline">¶</a></h2>
<p>The file at <tt class="docutils literal"><span class="pre">Misc/gdbinit</span></tt> contains a gdb configuration file which provides
extra commands when working with a CPython process. To register these commands
permanently, either copy the commands to your personal gdb configuration file
or symlink <tt class="docutils literal"><span class="pre">~/.gdbinit</span></tt> to <tt class="docutils literal"><span class="pre">Misc/gdbinit</span></tt>.  To use these commands from
a single gdb session without registering them, type <tt class="docutils literal"><span class="pre">source</span> <span class="pre">Misc/gdbinit</span></tt>
from your gdb session.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">23. gdb Support</a><ul>
<li><a class="reference internal" href="#gdb-7-and-later">23.1. gdb 7 and later</a></li>
<li><a class="reference internal" href="#gdb-6-and-earlier">23.2. gdb 6 and earlier</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="emacs.html"
                        title="previous chapter">22. Emacs support</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="grammar.html"
                        title="next chapter">24. Changing CPython&#8217;s Grammar</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/gdb.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="grammar.html" title="24. Changing CPython’s Grammar"
             >next</a> |</li>
        <li class="right" >
          <a href="emacs.html" title="22. Emacs support"
             >previous</a> |</li>
        <li><a href="index.html">Python Developer&#39;s Guide </a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011-2012, Python Software Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>